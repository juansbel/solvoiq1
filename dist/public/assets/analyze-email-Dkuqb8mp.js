import{h as A,u as P,r as n,j as e,ak as F,am as d,S as G,H as q,k as x,s as r}from"./index-Dsch-6rs.js";import{u as I}from"./useMutation-CWIftKBJ.js";import{A as m}from"./action-button-_bigQsZt.js";import{T as O}from"./textarea-with-copy-CfuLPcBf.js";import{P as Q}from"./plus-CRp7_VfK.js";import"./textarea-dxwQGyzt.js";import"./ai-Jk9rb3ej.js";import"./copy-CaaOG6R5.js";function U(){const o=A(),{toast:t}=P(),[c,v]=n.useState(`Subject: Urgent: Project Concerns and Timeline Questions

Hi Alex,

I hope you're well. I wanted to reach out because we've been discussing the project internally and have some concerns that need addressing.

First, we're not entirely satisfied with the current design direction. The mockups don't quite capture the modern, clean aesthetic we were hoping for. Our marketing team feels they look a bit outdated compared to our competitors.

Second, we're under pressure from our board to launch by Q2, which is earlier than our original timeline. Is there any way we can accelerate the development process?

Also, we'd like to add a mobile app component to the project. We know this wasn't in the original scope, but it's become a priority for us. What would this involve?

Finally, we need to discuss budget. The additional features we're requesting will likely impact costs, and we need to understand the implications.

Can we schedule a meeting this week to discuss all of these points? We're hoping to resolve these issues quickly so we can move forward.

Thanks,
John Smith
CEO, Acme Corporation`),[i,f]=n.useState(""),[u,w]=n.useState([]),[j,p]=n.useState(!1),[b,h]=n.useState(!1),[S,g]=n.useState(!1),[T,N]=n.useState(!1),y=I({mutationFn:async s=>(await r("POST","/api/email-templates",{title:s.title,body:s.body,isAiGenerated:!0})).json(),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/email-templates"]}),t({title:"Success",description:"Template saved to gallery!"})},onError:()=>{t({title:"Error",description:"Failed to save template",variant:"destructive"})}}),k=async()=>{if(!c.trim()){t({title:"Error",description:"Please enter an email to analyze",variant:"destructive"});return}p(!0);try{const a=await(await r("POST","/api/ai/analyze-email",{emailContent:c})).json();f(a.analysis),t({title:"Success",description:"Email analyzed successfully! See suggestions below."})}catch{t({title:"Error",description:"Failed to analyze email",variant:"destructive"})}finally{p(!1)}},C=async()=>{var s;if(!i){t({title:"Error",description:"Please analyze an email first",variant:"destructive"});return}h(!0);try{const l=await(await r("POST","/api/ai/generate-tasks",{suggestions:i})).json();o.invalidateQueries({queryKey:["/api/tasks"]}),o.invalidateQueries({queryKey:["/api/statistics"]}),t({title:"Success",description:`Created ${((s=l.tasks)==null?void 0:s.length)||0} tasks from suggestions!`})}catch{t({title:"Error",description:"Failed to create tasks",variant:"destructive"})}finally{h(!1)}},E=async()=>{var s;if(!i){t({title:"Error",description:"Please analyze an email first",variant:"destructive"});return}g(!0);try{const l=await(await r("POST","/api/ai/generate-templates",{suggestions:i})).json();w(l.templates||[]),N(!0),t({title:"Success",description:`Generated ${((s=l.templates)==null?void 0:s.length)||0} email templates!`})}catch{t({title:"Error",description:"Failed to generate templates",variant:"destructive"})}finally{g(!1)}},z=s=>{y.mutate(s)};return e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:F,children:"Analyze Email"}),e.jsx("p",{className:"text-slate-600",children:"Extract insights and get actionable suggestions from client emails"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:d,children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Client Email to Analyze"}),e.jsx(O,{value:c,onChange:v,placeholder:"Paste the client's email here...",rows:12,className:"mb-4"}),e.jsx(m,{onClick:k,loading:j,variant:"warning",icon:G,className:"w-full",children:"Analyze Email & Suggest Next Steps"})]}),e.jsxs("div",{className:d,children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Analysis & Suggestions"}),e.jsx("div",{className:"min-h-[300px] mb-4",children:i?e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-slate-700 bg-slate-50 p-4 rounded-lg",children:i})}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:"Analysis results will appear here after analyzing an email"})}),i&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{onClick:C,loading:b,variant:"primary",icon:Q,className:"w-full",children:"Create Tasks from Suggestions"}),e.jsx(m,{onClick:E,loading:S,variant:"success",icon:q,className:"w-full",children:"Generate Email Templates from Suggestions"})]})]})]}),T&&u.length>0&&e.jsxs("div",{className:`${d} mt-6`,children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Generated Email Templates"}),e.jsx("div",{className:"space-y-4",children:u.map((s,a)=>e.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-slate-900",children:s.title}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(s.body),t({title:"Copied!",description:"Template body copied to clipboard"})},children:"Copy Body"}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>z(s),disabled:y.isPending,children:"Save to Gallery"})]})]}),e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:s.body})]},a))})]})]})})}export{U as AnalyzeEmail};
